<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alumni+Sans:ital,wght@0,100..900;1,100..900&family=Anta&family=MuseoModerno:ital,wght@0,100..900;1,100..900&family=Nova+Square&family=Sixtyfour&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Jim+Nightshade&family=Odibee+Sans&family=Pirata+One&family=Rock+Salt&family=Sedgwick+Ave+Display&family=Six+Caps&family=UnifrakturCook:wght@700&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARBON CONSCIOUS</title>

    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>
<body>


    <div class="ribbon-container">
        <div class="ribbon ribbon-fast2"></div>        
        <div class="ribbon ribbon-slow1"></div>
        <div class="ribbon ribbon-fast1"></div>
        <div class="header-title">
            <h1 class="bebas-neue-regular ">Carbon Conscious Initiative</h1>
        </div>
    </div>

    <div class="nav-bar">
        <a href="main.html">About</a>
        <a href="schools.html">Schools</a>
        <a href="about.html">DEMO</a>
    </div>

    <body>
        <div class="dropdown-container">
            <div class="dropdown-column">
                <label for="building-selector1">Select a Building:</label>
                <select id="building-selector1" onchange="updateGraphs()"></select>
                <div id="graph-container1" class="graph-container"></div>
            </div>
            <div class="dropdown-column">
                <label for="building-selector2">Select another Building:</label>
                <select id="building-selector2" onchange="updateGraphs()"></select>
                <div id="graph-container2" class="graph-container"></div>
            </div>
        </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('mydata.json')  // Adjust 'buildings.json' to the path where your JSON file is stored
                .then(response => response.json())
                .then(data => {
                    const selector1 = document.getElementById('building-selector1');
                    const selector2 = document.getElementById('building-selector2');
                    data.forEach(building => {
                        let option = new Option(building.name, building.id);
                        selector1.add(option.cloneNode(true));  // CloneNode to add the same option to both selectors
                        selector2.add(option);
                    });
                })
                .catch(error => console.error('Error loading buildings:', error));
        });

        function updateGraphs() {
            const buildingId1 = document.getElementById('building-selector1').value;
            const buildingId2 = document.getElementById('building-selector2').value;
            console.log('Selected Building 1 ID:', buildingId1);
            console.log('Selected Building 2 ID:', buildingId2);
            // Add more functionality to update graphs based on selected building IDs
        }
        // This assumes all building data is stored in a single JSON file called 'building-data.json'.
        var allBuildingData = [];
    
        // Fetch all building data once and store it for use
        fetch('C:\Users\jayca\Documents\hope\CCI Website Local\Data\mydata.json')
            .then(response => response.json())
            .then(data => {
                allBuildingData = data;
                populateSelectors();  // Populate dropdowns after data is loaded
            })
            .catch(error => console.error('Failed to load building data:', error));
    
        function populateSelectors() {
            const selector1 = document.getElementById('building-selector1');
            const selector2 = document.getElementById('building-selector2');
            allBuildingData.forEach(building => {
                let option = new Option(building.name, building.id);
                selector1.add(option.cloneNode(true));  // CloneNode to add the same option to both selectors
                selector2.add(option);
            });
        }
    
        async function updateGraphs() {
            const buildingId1 = document.getElementById('building-selector1').value;
            const buildingId2 = document.getElementById('building-selector2').value;
    
            // Filter data for both buildings
            const data1 = allBuildingData.filter(building => building.id === buildingId1);
            const data2 = allBuildingData.filter(building => building.id === buildingId2);
    
            // Assume data1 and data2 are arrays of { month: 'Jan', year: 2020, value: 100 } objects
    
            const maxYValue = Math.max(
                ...data1.map(item => item.value),
                ...data2.map(item => item.value)
            );
    
            const layout = {
                title: 'Building Energy Consumption',
                barmode: 'group',
                yaxis: { range: [0, maxYValue] }
            };
    
            const trace1 = {
                x: data1.map(item => item.month + ' ' + item.year),
                y: data1.map(item => item.value),
                type: 'bar',
                name: 'Building 1'
            };
    
            Plotly.newPlot('graph-container1', [trace1], layout);
    
            const trace2 = {
                x: data2.map(item => item.month + ' ' + item.year),
                y: data2.map(item => item.value),
                type: 'bar',
                name: 'Building 2'
            };
    
            Plotly.newPlot('graph-container2', [trace2], layout);
        }
    </script>
    
</body>
</html>
